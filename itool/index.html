<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://byron.github.io/bit/itool/">
        <link rel="shortcut icon" href="../img/favicon.ico">

        <title>ITOOL - most general it tools - bit</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../css/prettify-1.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="..">bit</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="..">Home</a>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Commands <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li class="active">
                            <a href="./">ITOOL - most general it tools</a>
                        </li>
                    
                        <li >
                            <a href="../ztool/">ZTOOL - ZFS utilities</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../license/">License</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                <li >
                    <a rel="next" href="..">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../ztool/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/Byron/bit">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#the-itool">The ITool</a></li>
        
    
        <li class="main "><a href="#subcommands">Subcommands</a></li>
        
            <li><a href="#report">report</a></li>
        
            <li><a href="#dropbox">dropbox</a></li>
        
            <li><a href="#tractor">tractor</a></li>
        
            <li><a href="#fs-stat">fs-stat</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h2 id="the-itool">The ITool</h2>
<p>This tool is a wordplay on 'IT' and 'tool', keeping a variety of functionality relevant to various subsystems. These are organized into subcommands, each of which deals with it's own realm, and may have its very own flags.</p>
<h2 id="subcommands">Subcommands</h2>
<h3 id="report">report</h3>
<ul>
<li>
<p><strong>io-stat</strong></p>
<ul>
<li>
<p>Effectively a stress test, whose results will be reported. It can be used to test multi-worker scenarios with plenty of random large file reads and writes. It's useful to verify new hardware is working, and can be run on the fileserver itself or by clients who interact with the fileserver via NFS/SMB. You should definitely have a look at the various configuration flags to alter the stress level.</p>
<pre class="prettyprint well"><code>itool report -s output_dir=/tmp num_threads=4 io-stat generate
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>version</strong></p>
<ul>
<li>A very powerful command which uses the nightly directory tree information available for each project to find all versioned assets within a project, filtering them as needed, to output a report which can be used to delete old versions.</li>
<li>As this system is not connected to an asset management system, its more like a metal-hammer approach to this, but would be useful if storage space has to be freed up.</li>
<li>
<p>Example</p>
<pre class="prettyprint well"><code># If generate-script is used instead, it will generate a bash script to remove all files that are not supposed to be kept
itool report -s table=project keep_latest_version_count=3 path_include_regex=".*\.(abc|mov|mxf|jpeg|bin|tif|psd|dpx|fxd|mra)$" version generate
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>file-prune</strong></p>
<ul>
<li>Generates a report stating the duplication state of a certain directory tree compared to any amount of source trees, based on file-names.</li>
<li>Run it from time to time in order to get rid of packages in /mnt/rpm-repo/centos/ which are also present in /mnt/rpm-repo/mirrors (see example). Of course, it can be used for all sorts of deduplication in case simple deletion of duplicates is an option.</li>
<li>
<p>Example</p>
<pre class="prettyprint well"><code># the respective report generates a script which deletes the extra rpm files
itool report -s file_glob="*.rpm" file-prune  -s /mnt/rpm-repo-rw/mirrors/stable/centos/6 -p /mnt/rpm-repo-rw/centos/6/x86_64 generate
</code></pre>
</li>
</ul>
</li>
</ul>
<h3 id="dropbox">dropbox</h3>
<p>This subcommand has subcommands on its own. One is dedicated to querying the contents of the dropbox daemon database, showing managed packages and transactions. The other one is about altering the faith of pending transactions, which are rejected or approved.</p>
<ul>
<li>
<p><strong>list</strong></p>
<ul>
<li>Just list packages or transactions, with minimal filtering.</li>
<li>
<p>Example</p>
<pre class="prettyprint well"><code>itool dropbox list transaction
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>transaction</strong></p>
<ul>
<li>Do something with pending transactions. You have to obtain valid transaction IDs through a prior invocation of <code>itool dropbox list transaction</code>, look at the data, and then decide what to do.</li>
<li>
<p>Example</p>
<pre class="prettyprint well"><code>itool dropbox transaction reject 999999 --reason "its not allowed to transfer this kind of data"
</code></pre>
</li>
</ul>
</li>
</ul>
<h3 id="tractor">tractor</h3>
<p>A simple utility to help automating repetitive tractor tasks from the commandline. It allows to get a login to tractor and reload configuration, or set the blade nimby state:</p>
<pre class="prettyprint well"><code># TODO: Example
</code></pre>
<h3 id="fs-stat">fs-stat</h3>
<p>A tool to walk directory structures and place all information into a new or existing sql database. That way, the entire contents of a filesystem can be made available for quick analysis. Due to its ability to efficiently update existing databases, it is run nightly on all fileservers to maintain recent data. This data is in turn used by the itools <code>version</code> report to help freeing storage capacity.</p>
<p>A typical and easy-to-use invocation is the following, which takes care of all the details itself, and which can be invoked on a nightly basis:</p>
<pre class="prettyprint well"><code>itool fs-stat -ud mysql://hostname/server_hosting_filesystem -fd /path/to/filesystem/directory -t filesystem --fast
</code></pre>
</div>
        </div>

        

        <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/prettify-1.0.min.js"></script>
        <script src="../js/base.js"></script>
    </body>
</html>